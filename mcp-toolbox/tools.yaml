sources:
 azure-mysql:
    kind: mysql
    host: ${DB_HOST}
    port: 3306
    database: ${DB_NAME}
    user: ${USERNAME}
    password: ${PASSWORD}

tools:
  flight_offers_search:
    kind: mysql-sql
    source: azure-mysql
    statement: |
      SELECT 
        `id` AS `flight_id`, 
        `departure_airport_iata_code`, 
        `departure_datetime`, 
        `arrival_airport_iata_code`, 
        `arrival_datetime`, 
        `itinerary_duration`, 
        `number_of_stops`, 
        `price_currency`, 
        `included_checked_bags_only`, 
        `total_price`
      FROM `sim_travels`.`flight_offers`
      WHERE DATE(`departure_datetime`) = ?
      AND `departure_airport_iata_code` = ?
      AND `arrival_airport_iata_code` = ?
      LIMIT 5
    description: |
      Use this tool to get information for different flights.
      Takes an departure datetime, departure and arrival airport codes and returns info on all available flights.
      Do NOT use this tool with a flight id. Do NOT guess the departure datetime.
      A departure datetime is required in the format 'YYYY-MM-DD'.
      A departure_airport_iata_code is a 3 letter code for the departure airport
      An arrival_airport_iata_code is a 3 letter code for the departure airport
      Example: "Kuala Lumpur International Airport / KLIA / Kuala Lumpur" is "KUL"
    parameters:
      - name: departure_datetime
        type: string
        description: Date of departure in format 'YYYY-MM-DD'
      - name: departure_airport_iata_code
        type: string
        description: 3 letter code
      - name: arrival_airport_iata_code
        type: string
        description: 3 letter code

toolsets:
  offers-toolset:
    - flight_offers_search